<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login - Stellantis</title>
  <link rel="stylesheet" href="style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:wght@400;600;700" rel="stylesheet" />
  <style>
    .login-card{ max-width:380px; width:100%; margin:0 auto; }
    .shake{ animation:shake .35s ease-in-out; }
    @keyframes shake{ 10%, 90% { transform: translateX(-1px); } 20%, 80% { transform: translateX(2px); }
      30%, 50%, 70% { transform: translateX(-4px);} 40%, 60% { transform: translateX(4px);} }
    .theme-toggle{ border:none; background:transparent; cursor:pointer; padding:.4rem; border-radius:10px; }
  </style>
</head>
<body>
  <div id="toast-container"></div>

  <div class="container login-card">
    <header class="header-app">
      <div class="brand">
        <div class="brand-logo" aria-hidden="true"></div>
        <div>
          <div class="brand-title">STELLANTIS</div>
          <div class="subtitle">Seguran√ßa Patrimonial</div>
        </div>
      </div>
      <button id="themeToggle" class="theme-toggle" title="Alternar tema">
        <span class="material-symbols-rounded">light_mode</span>
      </button>
    </header>

    <form id="loginForm" style="display:flex; flex-direction:column; gap:1rem; margin-top:.5rem;">
      <label>Usu√°rio
        <div class="input-with-icon">
          <span class="material-symbols-rounded icon">person</span>
          <input id="usuario" class="input" name="usuario" type="text" autocomplete="username" required />
        </div>
      </label>
      <label>Registro
        <div class="input-with-icon">
          <span class="material-symbols-rounded icon">badge</span>
          <input id="registro" class="input" name="registro" type="text" required />
        </div>
      </label>
      <label>Turno
        <select id="turnoLogin" class="input" name="turno" required>
          <option value="Alpha">Alpha</option>
          <option value="Bravo">Bravo</option>
          <option value="Charlie">Charlie</option>
          <option value="Delta">Delta</option>
        </select>
      </label>
      <div class="button-row">
        <button type="submit">üîê Entrar</button>
      </div>
    </form>
  </div>

  <!-- Modal gen√©rico reutilizado por pages -->
  <div class="modal-overlay" id="modalOverlay" style="display:none;">
    <div class="modal-container">
      <div class="modal-header" id="modalHeader"></div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-footer">
        <button class="btn-modal btn-secondary" id="modalCancel">Fechar</button>
      </div>
    </div>
  </div>

  <script>
    // Tema persistente
    (function(){
      const theme = localStorage.getItem('theme') || 'dark';
      if(theme==='light') document.documentElement.classList.add('theme-light');
      const btn = document.getElementById('themeToggle');
      btn.addEventListener('click', ()=>{
        document.documentElement.classList.toggle('theme-light');
        const isLight = document.documentElement.classList.contains('theme-light');
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
        btn.querySelector('.material-symbols-rounded').textContent = isLight ? 'dark_mode' : 'light_mode';
      });
    })();

    function showToast(message) {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      container.appendChild(toast);
      setTimeout(() => toast.remove(), 2600);
    }

    const form = document.getElementById('loginForm');
    form.addEventListener('submit', function(e){
      e.preventDefault();
      const usuario = document.getElementById('usuario');
      const registro = document.getElementById('registro');
      const turno = document.getElementById('turnoLogin');
      if(!usuario.value.trim() || !registro.value.trim()){
        form.classList.remove('shake'); void form.offsetWidth; form.classList.add('shake');
        showToast('Preencha usu√°rio e registro.');
        return;
      }
      localStorage.setItem('usuario', usuario.value.trim());
      localStorage.setItem('registro', registro.value.trim());
      localStorage.setItem('turno', turno.value);
      showToast('Login realizado!');
      setTimeout(()=> window.location.href = 'interface_principal.html', 800);
    });

    // Prefill se existir
    document.addEventListener('DOMContentLoaded', ()=>{
      const u = localStorage.getItem('usuario') || '';
      const r = localStorage.getItem('registro') || '';
      if(u) document.getElementById('usuario').value = u;
      if(r) document.getElementById('registro').value = r;
    });
  </script>
</body>
</html>
